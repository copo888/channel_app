kind: pipeline
name: channel_app

clone:
  disable: true

steps:
  - name: docker-zhongshoupay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f zhongshoupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhongshoupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhongshoupay zhongshoupay/zhongshoupay.go
        - docker build -t zhongshoupay -f zhongshoupay/Dockerfile .
        - docker-compose -f zhongshoupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhongshoupay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: lepay

clone:
  disable: true

steps:
  - name: docker-lepay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f lepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lepay lepay/pay.go
        - docker build -t lepay -f lepay/Dockerfile .
        - docker-compose -f lepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lepay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: taotaopay

clone:
  disable: true

steps:
  - name: docker-taotaopay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f taotaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=taotaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/taotaopay taotaopay/pay.go
        - docker build -t taotaopay -f taotaopay/Dockerfile .
        - docker-compose -f taotaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/taotaopay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: wanlisinpay

clone:
  disable: true

steps:
  - name: docker-wanlisinpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wanlisinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanlisinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanlisinpay wanlisinpay/pay.go
        - docker build -t wanlisinpay -f wanlisinpay/Dockerfile .
        - docker-compose -f wanlisinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanlisinpay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay

clone:
  disable: true

steps:
  - name: docker-wangjhepay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wangjhepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay wangjhepay/pay.go
        - docker build -t wangjhepay -f wangjhepay/Dockerfile .
        - docker-compose -f wangjhepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shenfutongpay6

clone:
  disable: true

steps:
  - name: docker-shenfutongpay6
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f shenfutongpay6/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay6" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay6 shenfutongpay6/pay.go
        - docker build -t shenfutongpay6 -f shenfutongpay6/Dockerfile .
        - docker-compose -f shenfutongpay6/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay6_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: stpay

clone:
  disable: true

steps:
  - name: docker-stpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f stpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=stpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/stpay stpay/pay.go
        - docker build -t stpay -f stpay/Dockerfile .
        - docker-compose -f stpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/stpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: ailefupay

clone:
  disable: true

steps:
  - name: docker-ailefupay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f ailefupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ailefupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ailefupay ailefupay/pay.go
        - docker build -t ailefupay -f ailefupay/Dockerfile .
        - docker-compose -f ailefupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ailefupay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: huanyupay

clone:
  disable: true

steps:
  - name: docker-huanyupay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f huanyupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=huanyupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/huanyupay huanyupay/pay.go
        - docker build -t huanyupay -f huanyupay/Dockerfile .
        - docker-compose -f huanyupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/huanyupay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: lyubupay

clone:
  disable: true

steps:
  - name: docker-lyubupay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f lyubupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay lyubupay/pay.go
        - docker build -t lyubupay -f lyubupay/Dockerfile .
        - docker-compose -f lyubupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay_prod_*
      event:
        - push
        - tag
        - published

    
---
kind: pipeline
name: liepay

clone:
  disable: true

steps:
  - name: docker-liepay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f liepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=liepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/liepay liepay/pay.go
        - docker build -t liepay -f liepay/Dockerfile .
        - docker-compose -f liepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/liepay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: vcpay2

clone:
  disable: true

steps:
  - name: docker-vcpay2
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f vcpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vcpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vcpay2 vcpay2/pay.go
        - docker build -t vcpay2 -f vcpay2/Dockerfile .
        - docker-compose -f vcpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vcpay2_prod_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: mlbproxypay2

clone:
  disable: true

steps:
  - name: docker-mlbproxypay2
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f mlbproxypay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbproxypay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbproxypay2 mlbproxypay2/pay.go
        - docker build -t mlbproxypay2 -f mlbproxypay2/Dockerfile .
        - docker-compose -f mlbproxypay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbproxypay2_prod_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: sinshangpay

clone:
  disable: true

steps:
  - name: docker-sinshangpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f sinshangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinshangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinshangpay sinshangpay/pay.go
        - docker build -t sinshangpay -f sinshangpay/Dockerfile .
        - docker-compose -f sinshangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinshangpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: baisiangpay

clone:
  disable: true

steps:
  - name: docker-baisiangpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f baisiangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=baisiangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/baisiangpay baisiangpay/pay.go
        - docker build -t baisiangpay -f baisiangpay/Dockerfile .
        - docker-compose -f baisiangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/baisiangpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: vp8pay

clone:
  disable: true

steps:
  - name: docker-vp8pay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f vp8pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vp8pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vp8pay vp8pay/pay.go
        - docker build -t vp8pay -f vp8pay/Dockerfile .
        - docker-compose -f vp8pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vp8pay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jstpay

clone:
  disable: true

steps:
  - name: docker-jstpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f jstpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay jstpay/pay.go
        - docker build -t jstpay -f jstpay/Dockerfile .
        - docker-compose -f jstpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mlbpay

clone:
  disable: true

steps:
  - name: docker-mlbpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f mlbpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbpay mlbpay/pay.go
        - docker build -t mlbpay -f mlbpay/Dockerfile .
        - docker-compose -f mlbpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jindepay

clone:
  disable: true

steps:
  - name: docker-jindepay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f jindepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jindepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jindepay jindepay/pay.go
        - docker build -t jindepay -f jindepay/Dockerfile .
        - docker-compose -f jindepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jindepay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: sandianlingpay

clone:
  disable: true

steps:
  - name: docker-sandianlingpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f sandianlingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sandianlingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sandianlingpay sandianlingpay/pay.go
        - docker build -t sandianlingpay -f sandianlingpay/Dockerfile .
        - docker-compose -f sandianlingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sandianlingpay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wtpay

clone:
  disable: true

steps:
  - name: docker-wtpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wtpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wtpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wtpay wtpay/pay.go
        - docker build -t wtpay -f wtpay/Dockerfile .
        - docker-compose -f wtpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wtpay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shahepay

clone:
  disable: true

steps:
  - name: docker-shahepay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f shahepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shahepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shahepay shahepay/pay.go
        - docker build -t shahepay -f shahepay/Dockerfile .
        - docker-compose -f shahepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shahepay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shandianpay

clone:
  disable: true

steps:
  - name: docker-shandianpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f shandianpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shandianpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shandianpay shandianpay/pay.go
        - docker build -t shandianpay -f shandianpay/Dockerfile .
        - docker-compose -f shandianpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shandianpay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lelifupay

clone:
  disable: true

steps:
  - name: docker-lelifupay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f lelifupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lelifupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lelifupay lelifupay/pay.go
        - docker build -t lelifupay -f lelifupay/Dockerfile .
        - docker-compose -f lelifupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lelifupay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: yunshengpay

clone:
  disable: true

steps:
  - name: docker-yunshengpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f yunshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yunshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yunshengpay yunshengpay/pay.go
        - docker build -t yunshengpay -f yunshengpay/Dockerfile .
        - docker-compose -f yunshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yunshengpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mashangpay

clone:
  disable: true

steps:
  - name: docker-mashangpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f mashangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mashangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mashangpay mashangpay/pay.go
        - docker build -t mashangpay -f mashangpay/Dockerfile .
        - docker-compose -f mashangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mashangpay_prod_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: yibipay

clone:
  disable: true

steps:
  - name: docker-yibipay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f yibipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yibipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yibipay yibipay/pay.go
        - docker build -t yibipay -f yibipay/Dockerfile .
        - docker-compose -f yibipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yibipay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: uzpay

clone:
  disable: true

steps:
  - name: docker-uzpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f uzpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay uzpay/pay.go
        - docker build -t uzpay -f uzpay/Dockerfile .
        - docker-compose -f uzpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: shenfutongpay7

clone:
  disable: true

steps:
  - name: docker-shenfutongpay7
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f shenfutongpay7/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay7" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay7 shenfutongpay7/pay.go
        - docker build -t shenfutongpay7 -f shenfutongpay7/Dockerfile .
        - docker-compose -f shenfutongpay7/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay7_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay86

clone:
  disable: true

steps:
  - name: docker-wangjhepay86
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wangjhepay86/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay86" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay86 wangjhepay86/pay.go
        - docker build -t wangjhepay86 -f wangjhepay86/Dockerfile .
        - docker-compose -f wangjhepay86/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay86_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay87

clone:
  disable: true

steps:
  - name: docker-wangjhepay87
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wangjhepay87/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay87" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay87 wangjhepay87/pay.go
        - docker build -t wangjhepay87 -f wangjhepay87/Dockerfile .
        - docker-compose -f wangjhepay87/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay87_prod_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: duotsaipay

clone:
  disable: true

steps:
  - name: docker-duotsaipay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f duotsaipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=duotsaipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/duotsaipay duotsaipay/pay.go
        - docker build -t duotsaipay -f duotsaipay/Dockerfile .
        - docker-compose -f duotsaipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/duotsaipay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: uzpay7777

clone:
  disable: true

steps:
  - name: docker-uzpay7777
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f uzpay7777/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay7777" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay7777 uzpay7777/pay.go
        - docker build -t uzpay7777 -f uzpay7777/Dockerfile .
        - docker-compose -f uzpay7777/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay7777_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: uzpay1881

clone:
  disable: true

steps:
  - name: docker-uzpay1881
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f uzpay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay1881 uzpay1881/pay.go
        - docker build -t uzpay1881 -f uzpay1881/Dockerfile .
        - docker-compose -f uzpay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay1881_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lyubupay2

clone:
  disable: true

steps:
  - name: docker-lyubupay2
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f lyubupay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay2 lyubupay2/pay.go
        - docker build -t lyubupay2 -f lyubupay2/Dockerfile .
        - docker-compose -f lyubupay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay2_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: zhiyuanpay

clone:
  disable: true

steps:
  - name: docker-zhiyuanpay
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f zhiyuanpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhiyuanpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhiyuanpay zhiyuanpay/pay.go
        - docker build -t zhiyuanpay -f zhiyuanpay/Dockerfile .
        - docker-compose -f zhiyuanpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhiyuanpay_prod_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay116

clone:
  disable: true

steps:
  - name: docker-wangjhepay116
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f wangjhepay116/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay116" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay116 wangjhepay116/pay.go
        - docker build -t wangjhepay116 -f wangjhepay116/Dockerfile .
        - docker-compose -f wangjhepay116/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay116_prod_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jstpay2

clone:
  disable: true

steps:
  - name: docker-jstpay2
    image: appleboy/drone-ssh
    settings:
      host:
        - 172.28.222.65
        - 172.28.164.3
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout master
        - git checkout -- .
        - git pull origin master
        - go mod tidy
        - docker-compose -f jstpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay2 jstpay2/pay.go
        - docker build -t jstpay2 -f jstpay2/Dockerfile .
        - docker-compose -f jstpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay2_prod_*
      event:
        - push
        - tag
        - published
