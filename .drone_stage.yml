kind: pipeline
name: testpay

clone:
  disable: true

steps:
  - name: docker-testpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f testpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=testpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/testpay testpay/pay.go
        - docker build -t testpay -f testpay/Dockerfile .
        - docker-compose -f testpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/testpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: channel_app

clone:
  disable: true

steps:
  - name: docker-zhongshoupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zhongshoupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhongshoupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhongshoupay zhongshoupay/zhongshoupay.go
        - docker build -t zhongshoupay -f zhongshoupay/Dockerfile .
        - docker-compose -f zhongshoupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhongshoupay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lepay

clone:
  disable: true

steps:
  - name: docker-lepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lepay lepay/pay.go
        - docker build -t lepay -f lepay/Dockerfile .
        - docker-compose -f lepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lepay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: taotaopay

clone:
  disable: true

steps:
  - name: docker-taotaopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f taotaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=taotaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/taotaopay taotaopay/pay.go
        - docker build -t taotaopay -f taotaopay/Dockerfile .
        - docker-compose -f taotaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/taotaopay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wanlisinpay

clone:
  disable: true

steps:
  - name: docker-wanlisinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wanlisinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanlisinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanlisinpay wanlisinpay/pay.go
        - docker build -t wanlisinpay -f wanlisinpay/Dockerfile .
        - docker-compose -f wanlisinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanlisinpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay

clone:
  disable: true

steps:
  - name: docker-wangjhepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay wangjhepay/pay.go
        - docker build -t wangjhepay -f wangjhepay/Dockerfile .
        - docker-compose -f wangjhepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shenfutongpay6

clone:
  disable: true

steps:
  - name: docker-shenfutongpay6
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shenfutongpay6/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay6" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay6 shenfutongpay6/pay.go
        - docker build -t shenfutongpay6 -f shenfutongpay6/Dockerfile .
        - docker-compose -f shenfutongpay6/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay6_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: stpay

clone:
  disable: true

steps:
  - name: docker-stpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f stpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=stpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/stpay stpay/pay.go
        - docker build -t stpay -f stpay/Dockerfile .
        - docker-compose -f stpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/stpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: ailefupay

clone:
  disable: true

steps:
  - name: docker-ailefupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ailefupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ailefupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ailefupay ailefupay/pay.go
        - docker build -t ailefupay -f ailefupay/Dockerfile .
        - docker-compose -f ailefupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ailefupay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: huanyupay

clone:
  disable: true

steps:
  - name: docker-huanyupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f huanyupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=huanyupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/huanyupay huanyupay/pay.go
        - docker build -t huanyupay -f huanyupay/Dockerfile .
        - docker-compose -f huanyupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/huanyupay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lyubupay

clone:
  disable: true

steps:
  - name: docker-lyubupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lyubupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay lyubupay/pay.go
        - docker build -t lyubupay -f lyubupay/Dockerfile .
        - docker-compose -f lyubupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: liepay

clone:
  disable: true

steps:
  - name: docker-liepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f liepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=liepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/liepay liepay/pay.go
        - docker build -t liepay -f liepay/Dockerfile .
        - docker-compose -f liepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/liepay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: vcpay2

clone:
  disable: true

steps:
  - name: docker-vcpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vcpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vcpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vcpay2 vcpay2/pay.go
        - docker build -t vcpay2 -f vcpay2/Dockerfile .
        - docker-compose -f vcpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vcpay2_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mlbproxypay2

clone:
  disable: true

steps:
  - name: docker-mlbproxypay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbproxypay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbproxypay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbproxypay2 mlbproxypay2/pay.go
        - docker build -t mlbproxypay2 -f mlbproxypay2/Dockerfile .
        - docker-compose -f mlbproxypay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbproxypay2_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: sinshangpay

clone:
  disable: true

steps:
  - name: docker-sinshangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sinshangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinshangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinshangpay sinshangpay/pay.go
        - docker build -t sinshangpay -f sinshangpay/Dockerfile .
        - docker-compose -f sinshangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinshangpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: baisiangpay

clone:
  disable: true

steps:
  - name: docker-baisiangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f baisiangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=baisiangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/baisiangpay baisiangpay/pay.go
        - docker build -t baisiangpay -f baisiangpay/Dockerfile .
        - docker-compose -f baisiangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/baisiangpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: vp8pay

clone:
  disable: true

steps:
  - name: docker-vp8pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vp8pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vp8pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vp8pay vp8pay/pay.go
        - docker build -t vp8pay -f vp8pay/Dockerfile .
        - docker-compose -f vp8pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vp8pay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jstpay

clone:
  disable: true

steps:
  - name: docker-jstpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jstpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay jstpay/pay.go
        - docker build -t jstpay -f jstpay/Dockerfile .
        - docker-compose -f jstpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mlbpay

clone:
  disable: true

steps:
  - name: docker-mlbpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbpay mlbpay/pay.go
        - docker build -t mlbpay -f mlbpay/Dockerfile .
        - docker-compose -f mlbpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jindepay

clone:
  disable: true

steps:
  - name: docker-jindepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jindepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jindepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jindepay jindepay/pay.go
        - docker build -t jindepay -f jindepay/Dockerfile .
        - docker-compose -f jindepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jindepay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: sandianlingpay

clone:
  disable: true

steps:
  - name: docker-sandianlingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sandianlingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sandianlingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sandianlingpay sandianlingpay/pay.go
        - docker build -t sandianlingpay -f sandianlingpay/Dockerfile .
        - docker-compose -f sandianlingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sandianlingpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wtpay

clone:
  disable: true

steps:
  - name: docker-wtpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wtpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wtpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wtpay wtpay/pay.go
        - docker build -t wtpay -f wtpay/Dockerfile .
        - docker-compose -f wtpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wtpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shahepay

clone:
  disable: true

steps:
  - name: docker-shahepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shahepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shahepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shahepay shahepay/pay.go
        - docker build -t shahepay -f shahepay/Dockerfile .
        - docker-compose -f shahepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shahepay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shandianpay

clone:
  disable: true

steps:
  - name: docker-shandianpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shandianpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shandianpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shandianpay shandianpay/pay.go
        - docker build -t shandianpay -f shandianpay/Dockerfile .
        - docker-compose -f shandianpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shandianpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lelifupay

clone:
  disable: true

steps:
  - name: docker-lelifupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lelifupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lelifupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lelifupay lelifupay/pay.go
        - docker build -t lelifupay -f lelifupay/Dockerfile .
        - docker-compose -f lelifupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lelifupay_stage_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: yunshengpay

clone:
  disable: true

steps:
  - name: docker-yunshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yunshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yunshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yunshengpay yunshengpay/pay.go
        - docker build -t yunshengpay -f yunshengpay/Dockerfile .
        - docker-compose -f yunshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yunshengpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: htpay

clone:
  disable: true

steps:
  - name: docker-htpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay htpay/pay.go
        - docker build -t htpay -f htpay/Dockerfile .
        - docker-compose -f htpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: haojiehpay

clone:
  disable: true

steps:
  - name: docker-haojiehpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f haojiehpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=haojiehpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/haojiehpay haojiehpay/pay.go
        - docker build -t haojiehpay -f haojiehpay/Dockerfile .
        - docker-compose -f haojiehpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/haojiehpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: tiansiapay

clone:
  disable: true

steps:
  - name: docker-tiansiapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f tiansiapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=tiansiapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/tiansiapay tiansiapay/pay.go
        - docker build -t tiansiapay -f tiansiapay/Dockerfile .
        - docker-compose -f tiansiapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/tiansiapay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mashangpay

clone:
  disable: true

steps:
  - name: docker-mashangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mashangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mashangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mashangpay mashangpay/pay.go
        - docker build -t mashangpay -f mashangpay/Dockerfile .
        - docker-compose -f mashangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mashangpay_stage_*
      event:
        - push
        - tag
        - published


---
kind: pipeline
name: yibipay

clone:
  disable: true

steps:
  - name: docker-yibipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yibipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yibipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yibipay yibipay/pay.go
        - docker build -t yibipay -f yibipay/Dockerfile .
        - docker-compose -f yibipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yibipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: uzpay

clone:
  disable: true

steps:
  - name: docker-uzpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay uzpay/pay.go
        - docker build -t uzpay -f uzpay/Dockerfile .
        - docker-compose -f uzpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: shenfutongpay7

clone:
  disable: true

steps:
  - name: docker-shenfutongpay7
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shenfutongpay7/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay7" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay7 shenfutongpay7/pay.go
        - docker build -t shenfutongpay7 -f shenfutongpay7/Dockerfile .
        - docker-compose -f shenfutongpay7/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay7_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay86

clone:
  disable: true

steps:
  - name: docker-wangjhepay86
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay86/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay86" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay86 wangjhepay86/pay.go
        - docker build -t wangjhepay86 -f wangjhepay86/Dockerfile .
        - docker-compose -f wangjhepay86/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay86_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay87

clone:
  disable: true

steps:
  - name: docker-wangjhepay87
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay87/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay87" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay87 wangjhepay87/pay.go
        - docker build -t wangjhepay87 -f wangjhepay87/Dockerfile .
        - docker-compose -f wangjhepay87/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay87_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: duotsaipay

clone:
  disable: true

steps:
  - name: docker-duotsaipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f duotsaipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=duotsaipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/duotsaipay duotsaipay/pay.go
        - docker build -t duotsaipay -f duotsaipay/Dockerfile .
        - docker-compose -f duotsaipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/duotsaipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: uzpay7777

clone:
  disable: true

steps:
  - name: docker-uzpay7777
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay7777/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay7777" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay7777 uzpay7777/pay.go
        - docker build -t uzpay7777 -f uzpay7777/Dockerfile .
        - docker-compose -f uzpay7777/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay7777_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: uzpay1881

clone:
  disable: true

steps:
  - name: docker-uzpay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay1881 uzpay1881/pay.go
        - docker build -t uzpay1881 -f uzpay1881/Dockerfile .
        - docker-compose -f uzpay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay1881_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: lyubupay2

clone:
  disable: true

steps:
  - name: docker-lyubupay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lyubupay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay2 lyubupay2/pay.go
        - docker build -t lyubupay2 -f lyubupay2/Dockerfile .
        - docker-compose -f lyubupay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay2_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: zhiyuanpay

clone:
  disable: true

steps:
  - name: docker-zhiyuanpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zhiyuanpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhiyuanpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhiyuanpay zhiyuanpay/pay.go
        - docker build -t zhiyuanpay -f zhiyuanpay/Dockerfile .
        - docker-compose -f zhiyuanpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhiyuanpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: wangjhepay116

clone:
  disable: true

steps:
  - name: docker-wangjhepay116
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay116/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay116" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay116 wangjhepay116/pay.go
        - docker build -t wangjhepay116 -f wangjhepay116/Dockerfile .
        - docker-compose -f wangjhepay116/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay116_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: jstpay2

clone:
  disable: true

steps:
  - name: docker-jstpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jstpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay2 jstpay2/pay.go
        - docker build -t jstpay2 -f jstpay2/Dockerfile .
        - docker-compose -f jstpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay2_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: vp8pay2

clone:
  disable: true

steps:
  - name: docker-vp8pay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vp8pay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vp8pay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vp8pay2 vp8pay2/pay.go
        - docker build -t vp8pay2 -f vp8pay2/Dockerfile .
        - docker-compose -f vp8pay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vp8pay2_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: ipay

clone:
  disable: true

steps:
  - name: docker-ipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ipay ipay/pay.go
        - docker build -t ipay -f ipay/Dockerfile .
        - docker-compose -f ipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: wulinpay

clone:
  disable: true

steps:
  - name: docker-wulinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wulinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wulinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wulinpay wulinpay/pay.go
        - docker build -t wulinpay -f wulinpay/Dockerfile .
        - docker-compose -f wulinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wulinpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: changshengpay

clone:
  disable: true

steps:
  - name: docker-changshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f changshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=changshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/changshengpay changshengpay/pay.go
        - docker build -t changshengpay -f changshengpay/Dockerfile .
        - docker-compose -f changshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/changshengpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: wanmahuipay

clone:
  disable: true

steps:
  - name: docker-wanmahuipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wanmahuipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanmahuipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanmahuipay wanmahuipay/pay.go
        - docker build -t wanmahuipay -f wanmahuipay/Dockerfile .
        - docker-compose -f wanmahuipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanmahuipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: powerpay1881

clone:
  disable: true

steps:
  - name: docker-powerpay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f powerpay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=powerpay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/powerpay1881 powerpay1881/pay.go
        - docker build -t powerpay1881 -f powerpay1881/Dockerfile .
        - docker-compose -f powerpay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/powerpay1881_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: dpay

clone:
  disable: true

steps:
  - name: docker-dpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f dpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=dpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/dpay dpay/pay.go
        - docker build -t dpay -f dpay/Dockerfile .
        - docker-compose -f dpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/dpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: kumopay

clone:
  disable: true

steps:
  - name: docker-kumopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay kumopay/pay.go
        - docker build -t kumopay -f kumopay/Dockerfile .
        - docker-compose -f kumopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: alogatewaypay

clone:
  disable: true

steps:
  - name: docker-alogatewaypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f alogatewaypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=alogatewaypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/alogatewaypay alogatewaypay/pay.go
        - docker build -t alogatewaypay -f alogatewaypay/Dockerfile .
        - docker-compose -f alogatewaypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/alogatewaypay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: hueifutongpay

clone:
  disable: true

steps:
  - name: docker-hueifutongpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hueifutongpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hueifutongpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hueifutongpay hueifutongpay/pay.go
        - docker build -t hueifutongpay -f hueifutongpay/Dockerfile .
        - docker-compose -f hueifutongpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hueifutongpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: quickpay

clone:
  disable: true

steps:
  - name: docker-quickpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f quickpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=quickpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/quickpay quickpay/pay.go
        - docker build -t quickpay -f quickpay/Dockerfile .
        - docker-compose -f quickpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/quickpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jioufupay

clone:
  disable: true

steps:
  - name: docker-jioufupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jioufupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jioufupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jioufupay jioufupay/pay.go
        - docker build -t jioufupay -f jioufupay/Dockerfile .
        - docker-compose -f jioufupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jioufupay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: wgopay88

clone:
  disable: true

steps:
  - name: docker-wgopay88
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wgopay88/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wgopay88" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wgopay88 wgopay88/pay.go
        - docker build -t wgopay88 -f wgopay88/Dockerfile .
        - docker-compose -f wgopay88/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wgopay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: lanyunpay

clone:
  disable: true

steps:
  - name: docker-lanyunpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lanyunpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lanyunpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lanyunpay lanyunpay/pay.go
        - docker build -t lanyunpay -f lanyunpay/Dockerfile .
        - docker-compose -f lanyunpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lanyunpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: limafupay

clone:
  disable: true

steps:
  - name: docker-limafupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f limafupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=limafupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/limafupay limafupay/pay.go
        - docker build -t limafupay -f limafupay/Dockerfile .
        - docker-compose -f limafupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/limafupay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: koreapay

clone:
  disable: true

steps:
  - name: docker-koreapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f koreapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=koreapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/koreapay koreapay/pay.go
        - docker build -t koreapay -f koreapay/Dockerfile .
        - docker-compose -f koreapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/koreapay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: sinhongpay

clone:
  disable: true

steps:
  - name: docker-sinhongpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sinhongpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinhongpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinhongpay sinhongpay/pay.go
        - docker build -t sinhongpay -f sinhongpay/Dockerfile .
        - docker-compose -f sinhongpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinhongpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: laikepay

clone:
  disable: true

steps:
  - name: docker-laikepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f laikepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=laikepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/laikepay laikepay/pay.go
        - docker build -t laikepay -f laikepay/Dockerfile .
        - docker-compose -f laikepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/laikepay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: quickpay_va

clone:
  disable: true

steps:
  - name: docker-quickpay_va
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f quickpay_va/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=quickpay_va" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/quickpay_va quickpay_va/pay.go
        - docker build -t quickpay_va -f quickpay_va/Dockerfile .
        - docker-compose -f quickpay_va/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/quickpay_va_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: kumopay1881

clone:
  disable: true

steps:
  - name: docker-kumopay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay1881 kumopay1881/pay.go
        - docker build -t kumopay1881 -f kumopay1881/Dockerfile .
        - docker-compose -f kumopay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay1881_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: kumopay1

clone:
  disable: true

steps:
  - name: docker-kumopay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay1/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay1" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay1 kumopay1/pay.go
        - docker build -t kumopay1 -f kumopay1/Dockerfile .
        - docker-compose -f kumopay1/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay1_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: budingpay

clone:
  disable: true

steps:
  - name: docker-budingpay881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f budingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=budingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/budingpay budingpay/pay.go
        - docker build -t budingpay -f budingpay/Dockerfile .
        - docker-compose -f budingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/budingpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: zihyunpay

clone:
  disable: true

steps:
  - name: docker-zihyunpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zihyunpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zihyunpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zihyunpay zihyunpay/pay.go
        - docker build -t zihyunpay -f zihyunpay/Dockerfile .
        - docker-compose -f zihyunpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zihyunpay_stage_*
      event:
        - push
        - tag
        - published
---
kind: pipeline
name: mlbpay_php

clone:
  disable: true

steps:
  - name: docker-mlbpay_php
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbpay_php/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbpay_php" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbpay_php mlbpay_php/pay.go
        - docker build -t mlbpay_php -f mlbpay_php/Dockerfile .
        - docker-compose -f mlbpay_php/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbpay_php_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: budingpay

clone:
  disable: true

steps:
  - name: docker-budingpay881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f budingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=budingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/budingpay budingpay/pay.go
        - docker build -t budingpay -f budingpay/Dockerfile .
        - docker-compose -f budingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/budingpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: yuehhaopay

clone:
  disable: true

steps:
  - name: docker-yuehhaopay881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yuehhaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yuehhaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yuehhaopay yuehhaopay/pay.go
        - docker build -t yuehhaopay -f yuehhaopay/Dockerfile .
        - docker-compose -f yuehhaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yuehhaopay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: feibaopay

clone:
  disable: true

steps:
  - name: docker-feibaopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f feibaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=feibaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/feibaopay feibaopay/pay.go
        - docker build -t feibaopay -f feibaopay/Dockerfile .
        - docker-compose -f feibaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/feibaopay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: rcpay

clone:
  disable: true

steps:
  - name: docker-rcpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f rcpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=rcpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/rcpay rcpay/pay.go
        - docker build -t rcpay -f rcpay/Dockerfile .
        - docker-compose -f rcpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/rcpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: rcpay_ue

clone:
  disable: true

steps:
  - name: docker-rcpay_ue
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f rcpay_ue/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=rcpay_ue" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/rcpay_ue rcpay_ue/pay.go
        - docker build -t rcpay_ue -f rcpay_ue/Dockerfile .
        - docker-compose -f rcpay_ue/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/rcpay_ue_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: mashangpay8888

clone:
  disable: true

steps:
  - name: docker-mashangpay8888
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mashangpay8888/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mashangpay8888" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mashangpay8888 mashangpay8888/pay.go
        - docker build -t mashangpay8888 -f mashangpay8888/Dockerfile .
        - docker-compose -f mashangpay8888/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mashanpay8888_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: rcpay

clone:
  disable: true

steps:
  - name: docker-hueiyingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hueiyingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hueiyingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hueiyingpay hueiyingpay/pay.go
        - docker build -t hueiyingpay -f hueiyingpay/Dockerfile .
        - docker-compose -f hueiyingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hueiyingpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: duomeipay

clone:
  disable: true

steps:
  - name: docker-duomeipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f duomeipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=duomeipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/duomeipay duomeipay/pay.go
        - docker build -t duomeipay -f duomeipay/Dockerfile .
        - docker-compose -f duomeipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/duomeipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: gtpay

clone:
  disable: true

steps:
  - name: docker-gtpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f gtpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=gtpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/gtpay gtpay/pay.go
        - docker build -t gtpay -f gtpay/Dockerfile .
        - docker-compose -f gtpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/gtpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: nyypay

clone:
  disable: true

steps:
  - name: docker-nyypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f nyypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=nyypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/nyypay nyypay/pay.go
        - docker build -t nyypay -f nyypay/Dockerfile .
        - docker-compose -f nyypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/nyypay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: u2pay

clone:
  disable: true

steps:
  - name: docker-u2pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f u2pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=u2pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/u2pay u2pay/pay.go
        - docker build -t u2pay -f u2pay/Dockerfile .
        - docker-compose -f u2pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/u2pay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: kumopaymaya

clone:
  disable: true

steps:
  - name: docker-kumopaymaya
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopaymaya/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopaymaya" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopaymaya kumopaymaya/pay.go
        - docker build -t kumopaymaya -f kumopaymaya/Dockerfile .
        - docker-compose -f kumopaymaya/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopaymaya_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: easypay

clone:
  disable: true

steps:
  - name: docker-easypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f easypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=easypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/easypay easypay/pay.go
        - docker build -t easypay -f easypay/Dockerfile .
        - docker-compose -f easypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/easypay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: uhpay

clone:
  disable: true

steps:
  - name: docker-uhpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uhpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uhpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uhpay uhpay/pay.go
        - docker build -t uhpay -f uhpay/Dockerfile .
        - docker-compose -f uhpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uhpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: htpay2

clone:
  disable: true

steps:
  - name: docker-htpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay2 htpay2/pay.go
        - docker build -t htpay2 -f htpay2/Dockerfile .
        - docker-compose -f htpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay2_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: jindingpay

clone:
  disable: true

steps:
  - name: docker-jindingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jindingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jindingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jindingpay jindingpay/pay.go
        - docker build -t jindingpay -f htpay2/Dockerfile .
        - docker-compose -f jindingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jindingpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: qipay

clone:
  disable: true

steps:
  - name: docker-qipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f qipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=qipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/qipay qipay/pay.go
        - docker build -t qipay -f htpay2/Dockerfile .
        - docker-compose -f qipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/qipay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: dbinpay

clone:
  disable: true

steps:
  - name: docker-dbinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f dbinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=dbinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/dbinpay dbinpay/pay.go
        - docker build -t dbinpay -f htpay2/Dockerfile .
        - docker-compose -f dbinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/dbinpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: miduoduopay

clone:
  disable: true

steps:
  - name: docker-miduoduopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f miduoduopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=miduoduopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/miduoduopay miduoduopay/pay.go
        - docker build -t miduoduopay -f htpay2/Dockerfile .
        - docker-compose -f miduoduopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/miduoduopay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: miduoduopay

clone:
  disable: true

steps:
  - name: docker-globalpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f globalpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=globalpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/globalpay globalpay/pay.go
        - docker build -t globalpay -f htpay2/Dockerfile .
        - docker-compose -f globalpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/globalpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: typay

clone:
  disable: true

steps:
  - name: docker-typay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f typay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=typay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/typay typay/pay.go
        - docker build -t typay -f typay/Dockerfile .
        - docker-compose -f typay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/gtypay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: hqpay

clone:
  disable: true

steps:
  - name: docker-hqpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hqpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hqpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hqpay hqpay/pay.go
        - docker build -t hqpay -f hqpay/Dockerfile .
        - docker-compose -f hqpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hqpay_stage_*
      event:
        - push
        - tag
        - published

---
kind: pipeline
name: kaduoduopay

clone:
  disable: true

steps:
  - name: docker-kaduoduopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kaduoduopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kaduoduopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kaduoduopay kaduoduopay/pay.go
        - docker build -t kaduoduopay -f kaduoduopay/Dockerfile .
        - docker-compose -f kaduoduopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kaduoduopay_stage_*
      event:
        - push
        - tag
        - published