kind: pipeline
name: channelapp

clone:
  disable: true

steps:
  - name: docker-testpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f testpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=testpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/testpay testpay/pay.go
        - docker build -t testpay -f testpay/Dockerfile .
        - docker-compose -f testpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/testpay_stage_*
      status:
        - success


  - name: docker-zhongshoupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zhongshoupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhongshoupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhongshoupay zhongshoupay/zhongshoupay.go
        - docker build -t zhongshoupay -f zhongshoupay/Dockerfile .
        - docker-compose -f zhongshoupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhongshoupay_stage_*
      status:
        - success


  - name: docker-lepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lepay lepay/pay.go
        - docker build -t lepay -f lepay/Dockerfile .
        - docker-compose -f lepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lepay_stage_*
      status:
        - success


  - name: docker-taotaopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f taotaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=taotaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/taotaopay taotaopay/pay.go
        - docker build -t taotaopay -f taotaopay/Dockerfile .
        - docker-compose -f taotaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/taotaopay_stage_*
      status:
        - success


  - name: docker-wanlisinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wanlisinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanlisinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanlisinpay wanlisinpay/pay.go
        - docker build -t wanlisinpay -f wanlisinpay/Dockerfile .
        - docker-compose -f wanlisinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanlisinpay_stage_*
      status:
        - success


  - name: docker-wangjhepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay wangjhepay/pay.go
        - docker build -t wangjhepay -f wangjhepay/Dockerfile .
        - docker-compose -f wangjhepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay_stage_*
      status:
        - success


  - name: docker-shenfutongpay6
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shenfutongpay6/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay6" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay6 shenfutongpay6/pay.go
        - docker build -t shenfutongpay6 -f shenfutongpay6/Dockerfile .
        - docker-compose -f shenfutongpay6/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay6_stage_*
      status:
        - success


  - name: docker-stpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f stpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=stpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/stpay stpay/pay.go
        - docker build -t stpay -f stpay/Dockerfile .
        - docker-compose -f stpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/stpay_stage_*
      status:
        - success


  - name: docker-ailefupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ailefupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ailefupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ailefupay ailefupay/pay.go
        - docker build -t ailefupay -f ailefupay/Dockerfile .
        - docker-compose -f ailefupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ailefupay_stage_*
      status:
        - success


  - name: docker-huanyupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f huanyupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=huanyupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/huanyupay huanyupay/pay.go
        - docker build -t huanyupay -f huanyupay/Dockerfile .
        - docker-compose -f huanyupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/huanyupay_stage_*
      status:
        - success


  - name: docker-lyubupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lyubupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay lyubupay/pay.go
        - docker build -t lyubupay -f lyubupay/Dockerfile .
        - docker-compose -f lyubupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay_stage_*
      status:
        - success



  - name: docker-liepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f liepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=liepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/liepay liepay/pay.go
        - docker build -t liepay -f liepay/Dockerfile .
        - docker-compose -f liepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/liepay_stage_*
      status:
        - success



  - name: docker-vcpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vcpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vcpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vcpay2 vcpay2/pay.go
        - docker build -t vcpay2 -f vcpay2/Dockerfile .
        - docker-compose -f vcpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vcpay2_stage_*
      status:
        - success



  - name: docker-mlbproxypay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbproxypay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbproxypay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbproxypay2 mlbproxypay2/pay.go
        - docker build -t mlbproxypay2 -f mlbproxypay2/Dockerfile .
        - docker-compose -f mlbproxypay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbproxypay2_stage_*
      status:
        - success



  - name: docker-sinshangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sinshangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinshangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinshangpay sinshangpay/pay.go
        - docker build -t sinshangpay -f sinshangpay/Dockerfile .
        - docker-compose -f sinshangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinshangpay_stage_*
      status:
        - success



  - name: docker-baisiangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f baisiangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=baisiangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/baisiangpay baisiangpay/pay.go
        - docker build -t baisiangpay -f baisiangpay/Dockerfile .
        - docker-compose -f baisiangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/baisiangpay_stage_*
      status:
        - success



  - name: docker-vp8pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vp8pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vp8pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vp8pay vp8pay/pay.go
        - docker build -t vp8pay -f vp8pay/Dockerfile .
        - docker-compose -f vp8pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vp8pay_stage_*
      status:
        - success



  - name: docker-jstpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jstpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay jstpay/pay.go
        - docker build -t jstpay -f jstpay/Dockerfile .
        - docker-compose -f jstpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay_stage_*
      status:
        - success



  - name: docker-mlbpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbpay mlbpay/pay.go
        - docker build -t mlbpay -f mlbpay/Dockerfile .
        - docker-compose -f mlbpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbpay_stage_*
      status:
        - success



  - name: docker-jindepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jindepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jindepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jindepay jindepay/pay.go
        - docker build -t jindepay -f jindepay/Dockerfile .
        - docker-compose -f jindepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jindepay_stage_*
      status:
        - success


  - name: docker-sandianlingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sandianlingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sandianlingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sandianlingpay sandianlingpay/pay.go
        - docker build -t sandianlingpay -f sandianlingpay/Dockerfile .
        - docker-compose -f sandianlingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sandianlingpay_stage_*
      status:
        - success


  - name: docker-wtpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wtpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wtpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wtpay wtpay/pay.go
        - docker build -t wtpay -f wtpay/Dockerfile .
        - docker-compose -f wtpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wtpay_stage_*
      status:
        - success


  - name: docker-shahepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shahepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shahepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shahepay shahepay/pay.go
        - docker build -t shahepay -f shahepay/Dockerfile .
        - docker-compose -f shahepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shahepay_stage_*
      status:
        - success


  - name: docker-shandianpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shandianpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shandianpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shandianpay shandianpay/pay.go
        - docker build -t shandianpay -f shandianpay/Dockerfile .
        - docker-compose -f shandianpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shandianpay_stage_*
      status:
        - success


  - name: docker-lelifupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lelifupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lelifupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lelifupay lelifupay/pay.go
        - docker build -t lelifupay -f lelifupay/Dockerfile .
        - docker-compose -f lelifupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lelifupay_stage_*
      status:
        - success




  - name: docker-yunshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yunshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yunshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yunshengpay yunshengpay/pay.go
        - docker build -t yunshengpay -f yunshengpay/Dockerfile .
        - docker-compose -f yunshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yunshengpay_stage_*
      status:
        - success


  - name: docker-htpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay htpay/pay.go
        - docker build -t htpay -f htpay/Dockerfile .
        - docker-compose -f htpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay_stage_*
      status:
        - success



  - name: docker-haojiehpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f haojiehpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=haojiehpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/haojiehpay haojiehpay/pay.go
        - docker build -t haojiehpay -f haojiehpay/Dockerfile .
        - docker-compose -f haojiehpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/haojiehpay_stage_*
      status:
        - success


  - name: docker-tiansiapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f tiansiapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=tiansiapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/tiansiapay tiansiapay/pay.go
        - docker build -t tiansiapay -f tiansiapay/Dockerfile .
        - docker-compose -f tiansiapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/tiansiapay_stage_*
      status:
        - success



  - name: docker-mashangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mashangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mashangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mashangpay mashangpay/pay.go
        - docker build -t mashangpay -f mashangpay/Dockerfile .
        - docker-compose -f mashangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mashangpay_stage_*
      status:
        - success




  - name: docker-yibipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yibipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yibipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yibipay yibipay/pay.go
        - docker build -t yibipay -f yibipay/Dockerfile .
        - docker-compose -f yibipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yibipay_stage_*
      status:
        - success



  - name: docker-uzpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay uzpay/pay.go
        - docker build -t uzpay -f uzpay/Dockerfile .
        - docker-compose -f uzpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay_stage_*
      status:
        - success


  - name: docker-shenfutongpay7
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shenfutongpay7/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shenfutongpay7" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shenfutongpay7 shenfutongpay7/pay.go
        - docker build -t shenfutongpay7 -f shenfutongpay7/Dockerfile .
        - docker-compose -f shenfutongpay7/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shenfutongpay7_stage_*
      status:
        - success


  - name: docker-wangjhepay86
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay86/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay86" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay86 wangjhepay86/pay.go
        - docker build -t wangjhepay86 -f wangjhepay86/Dockerfile .
        - docker-compose -f wangjhepay86/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay86_stage_*
      status:
        - success


  - name: docker-wangjhepay87
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay87/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay87" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay87 wangjhepay87/pay.go
        - docker build -t wangjhepay87 -f wangjhepay87/Dockerfile .
        - docker-compose -f wangjhepay87/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay87_stage_*
      status:
        - success



  - name: docker-duotsaipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f duotsaipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=duotsaipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/duotsaipay duotsaipay/pay.go
        - docker build -t duotsaipay -f duotsaipay/Dockerfile .
        - docker-compose -f duotsaipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/duotsaipay_stage_*
      status:
        - success



  - name: docker-uzpay7777
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay7777/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay7777" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay7777 uzpay7777/pay.go
        - docker build -t uzpay7777 -f uzpay7777/Dockerfile .
        - docker-compose -f uzpay7777/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay7777_stage_*
      status:
        - success



  - name: docker-uzpay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uzpay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uzpay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uzpay1881 uzpay1881/pay.go
        - docker build -t uzpay1881 -f uzpay1881/Dockerfile .
        - docker-compose -f uzpay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uzpay1881_stage_*
      status:
        - success


  - name: docker-lyubupay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lyubupay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lyubupay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lyubupay2 lyubupay2/pay.go
        - docker build -t lyubupay2 -f lyubupay2/Dockerfile .
        - docker-compose -f lyubupay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lyubupay2_stage_*
      status:
        - success


  - name: docker-zhiyuanpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zhiyuanpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zhiyuanpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zhiyuanpay zhiyuanpay/pay.go
        - docker build -t zhiyuanpay -f zhiyuanpay/Dockerfile .
        - docker-compose -f zhiyuanpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zhiyuanpay_stage_*
      status:
        - success


  - name: docker-wangjhepay116
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wangjhepay116/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wangjhepay116" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wangjhepay116 wangjhepay116/pay.go
        - docker build -t wangjhepay116 -f wangjhepay116/Dockerfile .
        - docker-compose -f wangjhepay116/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wangjhepay116_stage_*
      status:
        - success


  - name: docker-jstpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jstpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay2 jstpay2/pay.go
        - docker build -t jstpay2 -f jstpay2/Dockerfile .
        - docker-compose -f jstpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay2_stage_*
      status:
        - success



  - name: docker-vp8pay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f vp8pay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=vp8pay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/vp8pay2 vp8pay2/pay.go
        - docker build -t vp8pay2 -f vp8pay2/Dockerfile .
        - docker-compose -f vp8pay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/vp8pay2_stage_*
      status:
        - success



  - name: docker-ipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ipay ipay/pay.go
        - docker build -t ipay -f ipay/Dockerfile .
        - docker-compose -f ipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ipay_stage_*
      status:
        - success



  - name: docker-wulinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wulinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wulinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wulinpay wulinpay/pay.go
        - docker build -t wulinpay -f wulinpay/Dockerfile .
        - docker-compose -f wulinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wulinpay_stage_*
      status:
        - success



  - name: docker-changshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f changshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=changshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/changshengpay changshengpay/pay.go
        - docker build -t changshengpay -f changshengpay/Dockerfile .
        - docker-compose -f changshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/changshengpay_stage_*
      status:
        - success



  - name: docker-wanmahuipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wanmahuipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanmahuipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanmahuipay wanmahuipay/pay.go
        - docker build -t wanmahuipay -f wanmahuipay/Dockerfile .
        - docker-compose -f wanmahuipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanmahuipay_stage_*
      status:
        - success



  - name: docker-powerpay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f powerpay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=powerpay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/powerpay1881 powerpay1881/pay.go
        - docker build -t powerpay1881 -f powerpay1881/Dockerfile .
        - docker-compose -f powerpay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/powerpay1881_stage_*
      status:
        - success



  - name: docker-dpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f dpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=dpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/dpay dpay/pay.go
        - docker build -t dpay -f dpay/Dockerfile .
        - docker-compose -f dpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/dpay_stage_*
      status:
        - success



  - name: docker-kumopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay kumopay/pay.go
        - docker build -t kumopay -f kumopay/Dockerfile .
        - docker-compose -f kumopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay_stage_*
      status:
        - success



  - name: docker-alogatewaypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f alogatewaypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=alogatewaypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/alogatewaypay alogatewaypay/pay.go
        - docker build -t alogatewaypay -f alogatewaypay/Dockerfile .
        - docker-compose -f alogatewaypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/alogatewaypay_stage_*
      status:
        - success



  - name: docker-hueifutongpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hueifutongpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hueifutongpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hueifutongpay hueifutongpay/pay.go
        - docker build -t hueifutongpay -f hueifutongpay/Dockerfile .
        - docker-compose -f hueifutongpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hueifutongpay_stage_*
      status:
        - success



  - name: docker-quickpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f quickpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=quickpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/quickpay quickpay/pay.go
        - docker build -t quickpay -f quickpay/Dockerfile .
        - docker-compose -f quickpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/quickpay_stage_*
      status:
        - success



  - name: docker-jioufupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jioufupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jioufupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jioufupay jioufupay/pay.go
        - docker build -t jioufupay -f jioufupay/Dockerfile .
        - docker-compose -f jioufupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jioufupay_stage_*
      status:
        - success



  - name: docker-wgopay88
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wgopay88/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wgopay88" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wgopay88 wgopay88/pay.go
        - docker build -t wgopay88 -f wgopay88/Dockerfile .
        - docker-compose -f wgopay88/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wgopay_stage_*
      status:
        - success



  - name: docker-lanyunpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lanyunpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lanyunpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lanyunpay lanyunpay/pay.go
        - docker build -t lanyunpay -f lanyunpay/Dockerfile .
        - docker-compose -f lanyunpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lanyunpay_stage_*
      status:
        - success



  - name: docker-limafupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f limafupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=limafupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/limafupay limafupay/pay.go
        - docker build -t limafupay -f limafupay/Dockerfile .
        - docker-compose -f limafupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/limafupay_stage_*
      status:
        - success



  - name: docker-koreapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f koreapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=koreapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/koreapay koreapay/pay.go
        - docker build -t koreapay -f koreapay/Dockerfile .
        - docker-compose -f koreapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/koreapay_stage_*
      status:
        - success



  - name: docker-sinhongpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sinhongpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinhongpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinhongpay sinhongpay/pay.go
        - docker build -t sinhongpay -f sinhongpay/Dockerfile .
        - docker-compose -f sinhongpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinhongpay_stage_*
      status:
        - success



  - name: docker-laikepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f laikepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=laikepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/laikepay laikepay/pay.go
        - docker build -t laikepay -f laikepay/Dockerfile .
        - docker-compose -f laikepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/laikepay_stage_*
      status:
        - success



  - name: docker-quickpay_va
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f quickpay_va/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=quickpay_va" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/quickpay_va quickpay_va/pay.go
        - docker build -t quickpay_va -f quickpay_va/Dockerfile .
        - docker-compose -f quickpay_va/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/quickpay_va_stage_*
      status:
        - success



  - name: docker-kumopay1881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay1881/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay1881" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay1881 kumopay1881/pay.go
        - docker build -t kumopay1881 -f kumopay1881/Dockerfile .
        - docker-compose -f kumopay1881/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay1881_stage_*
      status:
        - success


  - name: docker-budingpay881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f budingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=budingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/budingpay budingpay/pay.go
        - docker build -t budingpay -f budingpay/Dockerfile .
        - docker-compose -f budingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/budingpay_stage_*
      status:
        - success


  - name: docker-zihyunpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f zihyunpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=zihyunpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/zihyunpay zihyunpay/pay.go
        - docker build -t zihyunpay -f zihyunpay/Dockerfile .
        - docker-compose -f zihyunpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/zihyunpay_stage_*
      status:
        - success


  - name: docker-mlbpay_php
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mlbpay_php/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mlbpay_php" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mlbpay_php mlbpay_php/pay.go
        - docker build -t mlbpay_php -f mlbpay_php/Dockerfile .
        - docker-compose -f mlbpay_php/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mlbpay_php_stage_*
      status:
        - success



  - name: docker-yuehhaopay881
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f yuehhaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=yuehhaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/yuehhaopay yuehhaopay/pay.go
        - docker build -t yuehhaopay -f yuehhaopay/Dockerfile .
        - docker-compose -f yuehhaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/yuehhaopay_stage_*
      status:
        - success



  - name: docker-feibaopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f feibaopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=feibaopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/feibaopay feibaopay/pay.go
        - docker build -t feibaopay -f feibaopay/Dockerfile .
        - docker-compose -f feibaopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/feibaopay_stage_*
      status:
        - success



  - name: docker-rcpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f rcpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=rcpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/rcpay rcpay/pay.go
        - docker build -t rcpay -f rcpay/Dockerfile .
        - docker-compose -f rcpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/rcpay_stage_*
      status:
        - success



  - name: docker-rcpay_ue
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f rcpay_ue/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=rcpay_ue" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/rcpay_ue rcpay_ue/pay.go
        - docker build -t rcpay_ue -f rcpay_ue/Dockerfile .
        - docker-compose -f rcpay_ue/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/rcpay_ue_stage_*
      status:
        - success



  - name: docker-mashangpay8888
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mashangpay8888/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mashangpay8888" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mashangpay8888 mashangpay8888/pay.go
        - docker build -t mashangpay8888 -f mashangpay8888/Dockerfile .
        - docker-compose -f mashangpay8888/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mashanpay8888_stage_*
      status:
        - success



  - name: docker-hueiyingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hueiyingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hueiyingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hueiyingpay hueiyingpay/pay.go
        - docker build -t hueiyingpay -f hueiyingpay/Dockerfile .
        - docker-compose -f hueiyingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hueiyingpay_stage_*
      status:
        - success



  - name: docker-duomeipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f duomeipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=duomeipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/duomeipay duomeipay/pay.go
        - docker build -t duomeipay -f duomeipay/Dockerfile .
        - docker-compose -f duomeipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/duomeipay_stage_*
      status:
        - success



  - name: docker-gtpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f gtpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=gtpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/gtpay gtpay/pay.go
        - docker build -t gtpay -f gtpay/Dockerfile .
        - docker-compose -f gtpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/gtpay_stage_*
      status:
        - success



  - name: docker-nyypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f nyypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=nyypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/nyypay nyypay/pay.go
        - docker build -t nyypay -f nyypay/Dockerfile .
        - docker-compose -f nyypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/nyypay_stage_*
      status:
        - success



  - name: docker-u2pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f u2pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=u2pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/u2pay u2pay/pay.go
        - docker build -t u2pay -f u2pay/Dockerfile .
        - docker-compose -f u2pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/u2pay_stage_*
      status:
        - success



  - name: docker-kumopaymaya
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopaymaya/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopaymaya" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopaymaya kumopaymaya/pay.go
        - docker build -t kumopaymaya -f kumopaymaya/Dockerfile .
        - docker-compose -f kumopaymaya/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopaymaya_stage_*
      status:
        - success



  - name: docker-kumopay1111
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumopay1111/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumopay1111" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumopay1111 kumopay1111/pay.go
        - docker build -t kumopay1111 -f kumopay1111/Dockerfile .
        - docker-compose -f kumopay1111/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumopay1111_stage_*
      status:
        - success



  - name: docker-easypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f easypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=easypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/easypay easypay/pay.go
        - docker build -t easypay -f easypay/Dockerfile .
        - docker-compose -f easypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/easypay_stage_*
      status:
        - success



  - name: docker-uhpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f uhpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=uhpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/uhpay uhpay/pay.go
        - docker build -t uhpay -f uhpay/Dockerfile .
        - docker-compose -f uhpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/uhpay_stage_*
      status:
        - success



  - name: docker-htpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay2 htpay2/pay.go
        - docker build -t htpay2 -f htpay2/Dockerfile .
        - docker-compose -f htpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay2_stage_*
      status:
        - success



  - name: docker-jindingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jindingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jindingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jindingpay jindingpay/pay.go
        - docker build -t jindingpay -f jindingpay/Dockerfile .
        - docker-compose -f jindingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jindingpay_stage_*
      status:
        - success



  - name: docker-qipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f qipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=qipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/qipay qipay/pay.go
        - docker build -t qipay -f qipay/Dockerfile .
        - docker-compose -f qipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/qipay_stage_*
      status:
        - success



  - name: docker-dbinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f dbinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=dbinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/dbinpay dbinpay/pay.go
        - docker build -t dbinpay -f dbinpay/Dockerfile .
        - docker-compose -f dbinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/dbinpay_stage_*
      status:
        - success



  - name: docker-miduoduopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f miduoduopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=miduoduopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/miduoduopay miduoduopay/pay.go
        - docker build -t miduoduopay -f miduoduopay/Dockerfile .
        - docker-compose -f miduoduopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/miduoduopay_stage_*
      status:
        - success



  - name: docker-globalpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f globalpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=globalpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/globalpay globalpay/pay.go
        - docker build -t globalpay -f globalpay/Dockerfile .
        - docker-compose -f globalpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/globalpay_stage_*
      status:
        - success



  - name: docker-typay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f typay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=typay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/typay typay/pay.go
        - docker build -t typay -f typay/Dockerfile .
        - docker-compose -f typay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/typay_stage_*
      status:
        - success



  - name: docker-hqpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f hqpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=hqpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/hqpay hqpay/pay.go
        - docker build -t hqpay -f hqpay/Dockerfile .
        - docker-compose -f hqpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/hqpay_stage_*
      status:
        - success



  - name: docker-kaduoduopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kaduoduopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kaduoduopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kaduoduopay kaduoduopay/pay.go
        - docker build -t kaduoduopay -f kaduoduopay/Dockerfile .
        - docker-compose -f kaduoduopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kaduoduopay_stage_*
      status:
        - success



  - name: docker-tesihlapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f tesihlapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=tesihlapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/tesihlapay tesihlapay/pay.go
        - docker build -t tesihlapay -f tesihlapay/Dockerfile .
        - docker-compose -f tesihlapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/tesihlapay_stage_*
      status:
        - success



  - name: docker-mhdpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mhdpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mhdpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mhdpay mhdpay/pay.go
        - docker build -t mhdpay -f mhdpay/Dockerfile .
        - docker-compose -f mhdpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mhdpay_stage_*
      status:
        - success



  - name: docker-htpay3
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay3/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay3" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay3 htpay3/pay.go
        - docker build -t htpay3 -f htpay3/Dockerfile .
        - docker-compose -f htpay3/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay3_stage_*
      status:
        - success



  - name: docker-luckypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f luckypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=luckypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/luckypay luckypay/pay.go
        - docker build -t luckypay -f luckypay/Dockerfile .
        - docker-compose -f luckypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/luckypay_stage_*
      status:
        - success




  - name: docker-sypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sypay sypay/pay.go
        - docker build -t sypay -f sypay/Dockerfile .
        - docker-compose -f sypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sypay_stage_*
      status:
        - success




  - name: docker-sypaygcash
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sypaygcash/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sypaygcash" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sypaygcash sypaygcash/pay.go
        - docker build -t sypaygcash -f sypaygcash/Dockerfile .
        - docker-compose -f sypaygcash/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sypaygcash_stage_*
      status:
        - success



  - name: docker-capitalpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f capitalpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=capitalpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/capitalpay capitalpay/pay.go
        - docker build -t capitalpay -f capitalpay/Dockerfile .
        - docker-compose -f capitalpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/capitalpay_stage_*
      status:
        - success



  - name: docker-jinpinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jinpinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jinpinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jinpinpay jinpinpay/pay.go
        - docker build -t jinpinpay -f jinpinpay/Dockerfile .
        - docker-compose -f jinpinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jinpinpay_stage_*
      status:
        - success



  - name: docker-jinpinpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jinpinpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jinpinpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jinpinpay2 jinpinpay2/pay.go
        - docker build -t jinpinpay2 -f jinpinpay2/Dockerfile .
        - docker-compose -f jinpinpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jinpinpay2_stage_*
      status:
        - success



  - name: docker-lelifupay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f lelifupay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=lelifupay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/lelifupay2 lelifupay2/pay.go
        - docker build -t lelifupay2 -f lelifupay2/Dockerfile .
        - docker-compose -f lelifupay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/lelifupay2_stage_*
      status:
        - success



  - name: docker-leimapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f leimapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=leimapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/leimapay leimapay/pay.go
        - docker build -t leimapay -f leimapay/Dockerfile .
        - docker-compose -f leimapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/leimapay_stage_*
      status:
        - success



  - name: docker-changchengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f changchengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=changchengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/changchengpay changchengpay/pay.go
        - docker build -t changchengpay -f changchengpay/Dockerfile .
        - docker-compose -f changchengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/changchengpay_stage_*
      status:
        - success


  - name: docker-kypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kypay kypay/pay.go
        - docker build -t kypay -f kypay/Dockerfile .
        - docker-compose -f kypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kypay_stage_*
      status:
        - success




  - name: docker-senlinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f senlinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=senlinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/senlinpay senlinpay/pay.go
        - docker build -t senlinpay -f senlinpay/Dockerfile .
        - docker-compose -f senlinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/senlinpay_stage_*
      status:
        - success



  - name: docker-z17pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f z17pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=z17pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/z17pay z17pay/pay.go
        - docker build -t z17pay -f z17pay/Dockerfile .
        - docker-compose -f z17pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/z17pay_stage_*
      status:
        - success



  - name: docker-phptestpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f phptestpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=phptestpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/phptestpay phptestpay/pay.go
        - docker build -t phptestpay -f phptestpay/Dockerfile .
        - docker-compose -f phptestpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/phptestpay_stage_*
      status:
        - success




  - name: docker-goalpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f goalpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=goalpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/goalpay goalpay/pay.go
        - docker build -t goalpay -f goalpay/Dockerfile .
        - docker-compose -f goalpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/goalpay_stage_*
      status:
        - success




  - name: docker-ftpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ftpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ftpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ftpay ftpay/pay.go
        - docker build -t ftpay -f ftpay/Dockerfile .
        - docker-compose -f ftpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ftpay_stage_*
      status:
        - success



  - name: docker-sunnypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sunnypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sunnypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sunnypay sunnypay/pay.go
        - docker build -t sunnypay -f sunnypay/Dockerfile .
        - docker-compose -f sunnypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sunnypay_stage_*
      status:
        - success




  - name: docker-wanjioupay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f wanjioupay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=wanjioupay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/wanjioupay wanjioupay/pay.go
        - docker build -t wanjioupay -f wanjioupay/Dockerfile .
        - docker-compose -f wanjioupay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/wanjioupay_stage_*
      status:
        - success



  - name: docker-sunnypay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sunnypay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sunnypay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sunnypay2 sunnypay2/pay.go
        - docker build -t sunnypay2 -f sunnypay2/Dockerfile .
        - docker-compose -f sunnypay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sunnypay2_stage_*
      status:
        - success



  - name: docker-sunnypaymaya
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sunnypaymaya/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sunnypaymaya" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sunnypaymaya sunnypaymaya/pay.go
        - docker build -t sunnypaymaya -f sunnypaymaya/Dockerfile .
        - docker-compose -f sunnypaymaya/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sunnypaymaya_stage_*
      status:
        - success




  - name: docker-phptestpaymaya
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f phptestpaymaya/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=phptestpaymaya" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/phptestpaymaya phptestpaymaya/pay.go
        - docker build -t phptestpaymaya -f phptestpaymaya/Dockerfile .
        - docker-compose -f phptestpaymaya/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/phptestpaymaya_stage_*
      status:
        - success



  - name: docker-kumoproxypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f kumoproxypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=kumoproxypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/kumoproxypay kumoproxypay/pay.go
        - docker build -t kumoproxypay -f kumoproxypay/Dockerfile .
        - docker-compose -f kumoproxypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/kumoproxypay_stage_*
      status:
        - success



  - name: docker-globalproxypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f globalproxypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=globalproxypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/globalproxypay globalproxypay/pay.go
        - docker build -t globalproxypay -f globalproxypay/Dockerfile .
        - docker-compose -f globalproxypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/globalproxypay_stage_*
      status:
        - success




  - name: docker-youchengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f youchengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=youchengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/youchengpay youchengpay/pay.go
        - docker build -t youchengpay -f youchengpay/Dockerfile .
        - docker-compose -f youchengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/youchengpay_stage_*
      status:
        - success




  - name: docker-jyuhueipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jyuhueipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jyuhueipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jyuhueipay jyuhueipay/pay.go
        - docker build -t jyuhueipay -f jyuhueipay/Dockerfile .
        - docker-compose -f jyuhueipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jyuhueipay_stage_*
      status:
        - success



  - name: docker-shuangsipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f shuangsipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=shuangsipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/shuangsipay shuangsipay/pay.go
        - docker build -t shuangsipay -f shuangsipay/Dockerfile .
        - docker-compose -f shuangsipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/shuangsipay_stage_*
      status:
        - success




  - name: docker-mpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f mpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=mpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/mpay mpay/pay.go
        - docker build -t mpay -f mpay/Dockerfile .
        - docker-compose -f mpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/mpay_stage_*
      status:
        - success




  - name: docker-globalpaymaya
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f globalpaymaya/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=globalpaymaya" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/globalpaymaya globalpaymaya/pay.go
        - docker build -t globalpaymaya -f globalpaymaya/Dockerfile .
        - docker-compose -f globalpaymaya/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/globalpaymaya_stage_*
      status:
        - success




  - name: docker-cocopay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f cocopay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=cocopay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/cocopay cocopay/pay.go
        - docker build -t cocopay -f cocopay/Dockerfile .
        - docker-compose -f cocopay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/cocopay_stage_*
      status:
        - success




  - name: docker-z365pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f z365pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=z365pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/z365pay z365pay/pay.go
        - docker build -t z365pay -f z365pay/Dockerfile .
        - docker-compose -f z365pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/z365pay_stage_*
      status:
        - success




  - name: docker-drwaterpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f drwaterpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=drwaterpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/drwaterpay drwaterpay/pay.go
        - docker build -t drwaterpay -f drwaterpay/Dockerfile .
        - docker-compose -f drwaterpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/drwaterpay_stage_*
      status:
        - success




  - name: docker-chiangshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f chiangshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=chiangshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/chiangshengpay chiangshengpay/pay.go
        - docker build -t chiangshengpay -f chiangshengpay/Dockerfile .
        - docker-compose -f chiangshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/chiangshengpay_stage_*
      status:
        - success





  - name: docker-senlinpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f senlinpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=senlinpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/senlinpay2 senlinpay2/pay.go
        - docker build -t senlinpay2 -f senlinpay2/Dockerfile .
        - docker-compose -f senlinpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/senlinpay2_stage_*
      status:
        - success




  - name: docker-haojiehpayjpy
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f haojiehpayjpy/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=haojiehpayjpy" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/haojiehpayjpy haojiehpayjpy/pay.go
        - docker build -t haojiehpayjpy -f haojiehpayjpy/Dockerfile .
        - docker-compose -f haojiehpayjpy/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/haojiehpayjpy_stage_*
      status:
        - success




  - name: docker-jisuproxypay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jisuproxypay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jisuproxypay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jisuproxypay jisuproxypay/pay.go
        - docker build -t jisuproxypay -f jisuproxypay/Dockerfile .
        - docker-compose -f jisuproxypay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jisuproxypay_stage_*
      status:
        - success




  - name: docker-jxwpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jxwpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jxwpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jxwpay jxwpay/pay.go
        - docker build -t jxwpay -f jxwpay/Dockerfile .
        - docker-compose -f jxwpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jxwpay_stage_*
      status:
        - success




  - name: docker-sanyangpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sanyangpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sanyangpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sanyangpay sanyangpay/pay.go
        - docker build -t sanyangpay -f sanyangpay/Dockerfile .
        - docker-compose -f sanyangpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sanyangpay_stage_*
      status:
        - success




  - name: docker-htpay3alipayy
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f htpay3alipayy/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=htpay3alipayy" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/htpay3alipayy htpay3alipayy/pay.go
        - docker build -t htpay3alipayy -f htpay3alipayy/Dockerfile .
        - docker-compose -f htpay3alipayy/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/htpay3alipayy_stage_*
      status:
        - success




  - name: docker-sinpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sinpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sinpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sinpay sinpay/pay.go
        - docker build -t sinpay -f sinpay/Dockerfile .
        - docker-compose -f sinpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sinpay_stage_*
      status:
        - success




  - name: docker-ezpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ezpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ezpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ezpay ezpay/pay.go
        - docker build -t ezpay -f ezpay/Dockerfile .
        - docker-compose -f ezpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ezpay_stage_*
      status:
        - success




  - name: docker-ezpay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ezpay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ezpay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ezpay2 ezpay2/pay.go
        - docker build -t ezpay2 -f ezpay2/Dockerfile .
        - docker-compose -f ezpay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ezpay2_stage_*
      status:
        - success




  - name: docker-leimapay2
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f leimapay2/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=leimapay2" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/leimapay2 leimapay2/pay.go
        - docker build -t leimapay2 -f leimapay2/Dockerfile .
        - docker-compose -f leimapay2/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/leimapay2_stage_*
      status:
        - success




  - name: docker-ddpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f ddpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=ddpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/ddpay ddpay/pay.go
        - docker build -t ddpay -f ddpay/Dockerfile .
        - docker-compose -f ddpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/ddpay_stage_*
      status:
        - success




  - name: docker-jintaipay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jintaipay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jintaipay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jintaipay jintaipay/pay.go
        - docker build -t jintaipay -f jintaipay/Dockerfile .
        - docker-compose -f jintaipay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jintaipay_stage_*
      status:
        - success




  - name: docker-bcpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f bcpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=bcpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/bcpay bcpay/pay.go
        - docker build -t bcpay -f bcpay/Dockerfile .
        - docker-compose -f bcpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/bcpay_stage_*
      status:
        - success




  - name: docker-jstpay3
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f jstpay3/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=jstpay3" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/jstpay3 jstpay3/pay.go
        - docker build -t jstpay3 -f jstpay3/Dockerfile .
        - docker-compose -f jstpay3/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/jstpay3_stage_*
      status:
        - success




  - name: docker-indiapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f indiapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=indiapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/indiapay indiapay/pay.go
        - docker build -t indiapay -f indiapay/Dockerfile .
        - docker-compose -f indiapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/indiapay_stage_*
      status:
        - success

  - name: docker-sindingpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f sindingpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=sindingpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/sindingpay sindingpay/pay.go
        - docker build -t sindingpay -f sindingpay/Dockerfile .
        - docker-compose -f sindingpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/sindingpay_stage_*
      status:
        - success

  - name: docker-bcpayu
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f bcpayu/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=bcpayu" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/bcpayu bcpayu/pay.go
        - docker build -t bcpayu -f bcpayu/Dockerfile .
        - docker-compose -f bcpayu/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/bcpayu_stage_*
      status:
        - success

  - name: docker-direpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f direpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=direpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/direpay direpay/pay.go
        - docker build -t direpay -f direpay/Dockerfile .
        - docker-compose -f direpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/direpay_stage_*
      status:
        - success

  - name: docker-haoshengpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f haoshengpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=haoshengpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/haoshengpay haoshengpay/pay.go
        - docker build -t haoshengpay -f haoshengpay/Dockerfile .
        - docker-compose -f haoshengpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/haoshengpay_stage_*
      status:
        - success


  - name: docker-onepay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f onepay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=onepay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/onepay onepay/pay.go
        - docker build -t onepay -f onepay/Dockerfile .
        - docker-compose -f onepay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/onepay_stage_*
      status:
        - success


  - name: docker-glpay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f glpay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=glpay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/glpay glpay/pay.go
        - docker build -t glpay -f glpay/Dockerfile .
        - docker-compose -f glpay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/glpay_stage_*
      status:
        - success


  - name: docker-bcpayue
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f bcpayue/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=bcpayue" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/bcpayue bcpayue/pay.go
        - docker build -t bcpayue -f bcpayue/Dockerfile .
        - docker-compose -f bcpayue/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/bcpayue_stage_*
      status:
        - success


  - name: docker-my888pay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f my888pay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=my888pay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/my888pay my888pay/pay.go
        - docker build -t my888pay -f my888pay/Dockerfile .
        - docker-compose -f my888pay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/my888pay_stage_*
      status:
        - success

  - name: docker-papayapay
    image: appleboy/drone-ssh:1.6.5-linux-amd64
    settings:
      host:
        from_secret: host
      username:
        from_secret: user
      password:
        from_secret: pwd
      port:
        from_secret: port
      script:
        - cd /root/channel_app
        - git checkout -- .
        - git fetch
        - git checkout stage
        - git checkout -- .
        - git pull origin stage
        - go mod tidy
        - docker-compose -f papayapay/docker-compose.yml down
        - docker rmi -f $(docker images --filter="reference=papayapay" --quiet)
        - docker rmi -f $(docker images -qf "dangling=true")
        - CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-s -w" -o bin/papayapay papayapay/pay.go
        - docker build -t papayapay -f papayapay/Dockerfile .
        - docker-compose -f papayapay/docker-compose.yml up -d
    when:
      ref:
        - refs/tags/my888pay_stage_*
      status:
        - success